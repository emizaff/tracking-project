---
import AuthLayout from '../layouts/AuthLayout.astro';

// Import Komponen React
import PublicProjectList from '../components/PublicProjectList';
import PublicGoalList from '../components/PublicGoalList';
import PublicIdeaForm from '../components/PublicIdeaForm';

// Pindahkan logika Date ke sini untuk menghindari error TS di template
const currentYear = new Date().getFullYear();
---

<AuthLayout title="Mewujudkan Mimpi | Public Roadmap">
    <main class="min-h-screen selection:bg-[#f01036]/30 selection:text-white">
        
        <!-- HERO SECTION -->
        <section class="relative pt-24 pb-32 overflow-hidden border-b border-[#1A1A1A]">
            <!-- Red Glow Background Decor -->
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-4xl h-96 bg-[#f01036]/10 blur-[120px] rounded-full -z-10"></div>

            <div class="max-w-4xl mx-auto px-6 relative z-10 text-center">
                <!-- Badge 12 Project Challenge -->
                <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#1A1A1A] border border-[#333] backdrop-blur-md text-[#f01036] text-[10px] font-black uppercase tracking-widest mb-8 animate-pulse">
                    <span class="w-2 h-2 rounded-full bg-[#f01036]"></span>
                    12 Projects Challenge: 1 of 12
                </div>
                
                <h1 class="text-5xl md:text-7xl font-black text-white mb-6 leading-tight tracking-tight">
                    Mewujudkan <span class="text-[#f01036] drop-shadow-[0_0_15px_rgba(240,16,54,0.4)]">Mimpi</span> <br class="hidden md:block" />
                    Menjadi Nyata.
                </h1>
                
                <p class="text-lg md:text-xl text-[#888] max-w-2xl mx-auto leading-relaxed mb-10 font-medium">
                    Selamat datang di dashboard publik saya. Di sini kalian bisa memantau perkembangan project yang sedang saya kerjakan secara real-time.
                </p>

                <div class="flex flex-wrap justify-center gap-4">
                    <a href="#projects" class="px-10 py-4 bg-[#f01036] hover:bg-[#d00e2e] text-white rounded-2xl font-bold transition-all shadow-[0_0_20px_rgba(240,16,54,0.3)] hover:scale-105 active:scale-95">
                        Lihat Project ðŸš€
                    </a>
                    <a href="#ideas" class="px-10 py-4 bg-[#1A1A1A] hover:bg-[#222] text-[#ccc] border border-[#333] rounded-2xl font-bold transition-all">
                        Kirim Ide ðŸ’¡
                    </a>
                </div>
            </div>
        </section>

        <div class="max-w-6xl mx-auto px-6 py-24 grid grid-cols-1 lg:grid-cols-3 gap-16">
            
            <!-- SECTION 1: PROJECT AKTIF (KIRI/UTAMA) -->
            <section id="projects" class="lg:col-span-2 space-y-10">
                <div class="flex flex-col gap-2 mb-10">
                    <h2 class="text-3xl font-black text-white flex items-center gap-3">
                        <span class="w-8 h-1 bg-[#f01036] rounded-full"></span> Active Projects
                    </h2>
                    <p class="text-[#666] font-medium">Inisiatif yang sedang dikembangkan saat ini.</p>
                </div>
                
                <PublicProjectList client:load />
            </section>

            <!-- SIDEBAR: GOALS & IDEA FORM (KANAN) -->
            <aside class="space-y-20">
                
                <!-- SECTION 2: GOALS / WISHLIST -->
                <section id="goals">
                    <div class="flex flex-col gap-2 mb-8">
                        <h2 class="text-xl font-black text-white flex items-center gap-3">
                            <span class="text-[#f01036]">#</span> Goals & Rewards
                        </h2>
                        <p class="text-xs text-[#666] font-medium">Target pribadi dan reward pencapaian.</p>
                    </div>

                    <div class="bg-[#1A1A1A]/50 p-6 rounded-3xl border border-[#333]">
                        <PublicGoalList client:visible />
                    </div>
                </section>

                <!-- SECTION 3: IDEA FORM -->
                <section id="ideas" class="pt-10 border-t border-[#1A1A1A]">
                    <div class="flex flex-col gap-2 mb-6">
                        <h2 class="text-xl font-black text-white flex items-center gap-3">
                            <span class="text-[#f01036]">#</span> Feed the Engine
                        </h2>
                        <p class="text-xs text-[#666] font-medium">Punya saran fitur atau ide gila?</p>
                    </div>

                    <div class="bg-[#1A1A1A] p-6 rounded-3xl border border-[#333] shadow-xl">
                        <PublicIdeaForm client:visible />
                    </div>
                </section>

            </aside>
        </div>

        <!-- FOOTER -->
        <footer class="py-16 border-t border-[#1A1A1A] text-center bg-[#050505]">
            <div class="flex flex-col items-center gap-6">
                <img src="/Logo8.png" alt="Logo" class="w-10 h-10 grayscale opacity-20" />
                <div class="space-y-2">
                    <p class="text-[#444] text-[10px] font-black uppercase tracking-[0.4em]">
                        Built with <span class="text-[#f01036]">Astro</span> & <span class="text-[#ccc]">Elysia</span>
                    </p>
                    <p class="text-[#333] text-[9px] font-bold">
                        &copy; {currentYear} Tracking Project &bull; Project 01
                    </p>
                </div>
                <div class="flex gap-6">
                    <a href="/login" class="text-[#444] hover:text-[#f01036] transition-colors text-xs font-bold uppercase tracking-widest">Admin Login</a>
                </div>
            </div>
        </footer>

    </main>
</AuthLayout>